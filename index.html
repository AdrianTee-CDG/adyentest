<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <script src="https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/5.51.0/adyen.js"
       integrity="sha384-FJWX32BY0zx3KKed9gdiWxoEAEsA3uh1ixchmdkflgtcDo+SoYg5ZD6uqvDmnafO"
       crossorigin="anonymous"></script>

  <link rel="stylesheet"
       href="https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/5.51.0/adyen.css"
       integrity="sha384-k6qYnmoHaucEm97eQQAs3MK5e44JQ2sksrue2tfdDOnnedKzc0VYQwxzdYWZu8Mj"
       crossorigin="anonymous">
</head>
<body>
    <div id="customCard-container">
      <label>
          <span>Card number:</span>
          <span data-cse="encryptedCardNumber"></span>
      </label>
      <label>
          <span>Expiry date:</span>
          <span data-cse="encryptedExpiryDate"></span>
      </label>
      <label>
          <span>CVV/CVC:</span>
          <span data-cse="encryptedSecurityCode"></span>
      </label>
  </div>
<script type="text/javascript">
  function handleOnChange(state, component) {
    console.log("handleOnChange");
     // True or false. Specifies if all the information that the shopper provided is valid.
    console.log("state.isValid", state.isValid);
    console.log("state.data ", state.data);
    component // Provides the active component instance that called this event.
  }

  async function startcheckout() {
   
    const configuration = {
        locale: "en_US",
        environment: "test",
        clientKey: "test_PALRIIX2FRADZNZNIE4BKDVL3IWYOSXS", // ngp testing key
        onChange: handleOnChange
    };
    const checkout = await AdyenCheckout(configuration);

    const customCard = checkout.create('securedfields', {
        // Optional configuration
        type: 'card',
        brands: ['mc', 'visa', 'amex', 'bcmc', 'maestro'],
        styles: {
            error: {
                color: 'red'
            },
            validated: {
                color: 'green'
            },
            placeholder: {
                color: '#d8d8d8'
            }
        },
        // Only for Web Components before 4.0.0.
        // For Web Components 4.0.0 and above, configure aria-label attributes in translation files
        ariaLabels: {
            lang: 'en-GB',
            encryptedCardNumber: {
                label: 'Credit or debit card number field',
                iframeTitle: 'Iframe for secured card number',
                error: 'Message that gets read out when the field is in the error state'
            }
        },
        // Events
        onChange: function() {},
        onValid : function() {},
        onLoad: function() {},
        onConfigSuccess: function() {},
        onFieldValid : function() {},
        onBrand: function() {},
        onError: function() {},
        onFocus: function() {},
        onBinValue: function(bin) {},
        onBinLookup: function(callbackObj) {}
    }).mount('#customCard-container');
  }

  function startadyen() {

    startcheckout().then(res=>{
      console.log("done loading");
    });
    
  }

  startadyen();
    

</script>
</body>
</html>
